# Anonymous Types

## Problem

Anonymous types like `var x = new { Test = "Cat" }` end up being types generated by the compiler. They're also used a lot in LINQ, both written by developers and generated by compilers when using the query syntax.

## Maybe a solution

Convert anonymous types in to tuples.

* Find any anonymous type
* Select an appropriate tuple, build a constructor for it
* Visit a NewExpr, replace it with our tuple constructor


## Further problems
* Nested anonymous types
* Anonymous types with more than eight properties. (Can use 'rest' of a tuple, but argh.)
* Empty anonymous types?
* ConstantExpressions of anonymous types
* Can I discover anonymous types and build and use my up my constructor/property assignment functions in a single walk of the tree or do I need to do some of that upfront?